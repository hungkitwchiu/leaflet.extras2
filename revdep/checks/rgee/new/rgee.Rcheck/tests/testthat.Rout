
R version 4.0.3 (2020-10-10) -- "Bunny-Wunnies Freak Out"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
Warning message:
package 'testthat' was built under R version 4.0.5 
> library(raster)
Loading required package: sp
Warning messages:
1: package 'raster' was built under R version 4.0.5 
2: package 'sp' was built under R version 4.0.5 
> library(stars)
Loading required package: abind
Loading required package: sf
Linking to GEOS 3.9.1, GDAL 3.2.1, PROJ 7.2.1; sf_use_s2() is TRUE
Warning messages:
1: package 'stars' was built under R version 4.0.5 
2: package 'sf' was built under R version 4.0.5 
> library(rgee)
> library(sf)
> 
> Sys.setenv(EARTHENGINE_PYTHON="/usr/bin/python3")
> Sys.setenv(RETICULATE_PYTHON="/usr/bin/python3")
> 
> # Pre-checking ------------------------------------------------------
> # Google credentials were loaded in the system?
> skip_if_no_credentials <- function() {
+   ee_path <- ee_get_earthengine_path()
+   credentials <- list.files(
+     path = ee_path,
+     pattern = "@gmail.com|credentials|GCS_AUTH_FILE.json"
+   )
+   if (length(credentials) != 3) {
+     skip("All google credentials were not found")
+   }
+ }
> 
> # Necessary Python packages were loaded?
> skip_if_no_pypkg <- function() {
+   have_ee <- reticulate::py_module_available("ee")
+   have_numpy <- reticulate::py_module_available("numpy2")
+   if (isFALSE(have_ee)) {
+     skip("ee not available for testing")
+   }
+   if (isFALSE(have_numpy)) {
+     skip("numpy not available for testing")
+   }
+ }
> 
> # Define your Drive folder to save intermediate files
> # ALERT!!: After tests finished all the files inside the folder
> # will be deleted.
> drive_folder_f <- function(){
+   "rgee_backup"
+ }
> 
> # Define your own GCS bucket with fine-grained access to save
> # intermediate files. ALERT!!: After test finished all the files
> # inside the bucket will be deleted.
> gcs_bucket_f <- function(){
+   "rgee_dev"
+ }
> 
> # Define your own GCS bucket with uniform access to save
> # intermediate files. ALERT!!: After test finished all the files
> # inside the bucket will be deleted.
> gcs_bucket_uniform_f <- function(){
+   "rgee_dev_uniform"
+ }
> 
> # Initialize credentials
> # If you do not count with GCS credentials the test will be skipped
> have_ee <- reticulate::py_module_available("ee")
> have_numpy <- reticulate::py_module_available("numpy2")
> if (have_ee & have_numpy) {
+ ee_Initialize(drive = TRUE, gcs = TRUE)
+ }
> 
> test_check("rgee")
[ FAIL 0 | WARN 0 | SKIP 21 | PASS 0 ]

== Skipped tests ===============================================================
* ee not available for testing (21)

[ FAIL 0 | WARN 0 | SKIP 21 | PASS 0 ]
> 
> proc.time()
   user  system elapsed 
   6.96    0.70   29.31 
